<!doctype html>
<html lang="zh-CN" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>心语翻译之书 · Spell 1</title>
  <meta name="description" content="Lingua Magica｜心语翻译之书：将心语在学术/诗性/日常语域之间温柔转译的咒语。" />
  <link rel="icon" type="image/png" href="/kitten-icon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .starfield{position:fixed;inset:0;background:radial-gradient(1200px 600px at 80% -10%,rgba(255,255,255,.08),transparent 60%),radial-gradient(800px 400px at 10% -10%,rgba(255,255,255,.06),transparent 60%),radial-gradient(1200px 600px at 50% 120%,rgba(255,255,255,.05),transparent 60%);pointer-events:none}
    .twinkle{position:absolute;width:2px;height:2px;border-radius:50%;background:#fff;opacity:.6;animation:twinkle 4s infinite ease-in-out}
    @keyframes twinkle{0%,100%{opacity:.1;transform:scale(.8)}50%{opacity:.9;transform:scale(1.4)}}
    .glass{backdrop-filter:saturate(160%) blur(8px);-webkit-backdrop-filter:saturate(160%) blur(8px)}
    .kbd{border:1px solid rgba(148,163,184,.5);border-bottom-width:2px;border-radius:.5rem;padding:.125rem .4rem;font-size:.7rem}
  </style>
</head>
<body class="min-h-screen bg-zinc-50 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100">
  <div class="fixed inset-0 -z-10"><div class="starfield"></div><div id="stars"></div></div>

  <!-- 顶栏 / 面包屑 -->
  <header class="sticky top-0 z-40 border-b border-zinc-200/60 dark:border-zinc-800/60 bg-white/70 dark:bg-zinc-950/60 glass">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <nav class="flex items-center gap-2 text-sm">
        <a href="./index.html" class="rounded-xl px-2 py-1 border border-zinc-300/70 dark:border-zinc-700/70 hover:bg-zinc-100 dark:hover:bg-zinc-900 transition">主页</a>
        <span class="text-zinc-500">/</span>
        <a href="./kitten.html" class="rounded-xl px-2 py-1 border border-zinc-300/70 dark:border-zinc-700/70 hover:bg-zinc-100 dark:hover:bg-zinc-900 transition">魔法金库</a>
        <span class="text-zinc-500">/</span>
        <span class="text-zinc-700 dark:text-zinc-300">心语翻译之书</span>
      </nav>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="rounded-2xl px-2.5 py-1.5 text-sm border border-zinc-300/70 dark:border-zinc-700/70 hover:bg-zinc-100 dark:hover:bg-zinc-900 transition" aria-label="切换主题">☾</button>
      </div>
    </div>
  </header>

  <!-- 标题区 -->
  <section class="mx-auto max-w-6xl px-4 pt-8 pb-3">
    <div class="flex items-start gap-3">
      <img src="/kitten-icon.png" alt="Kitten" class="h-10 w-10 rounded-xl shadow"/>
      <div>
        <h1 class="text-2xl md:text-3xl font-semibold">心语翻译之书 <span class="text-sm align-middle ml-2 text-zinc-500">Spell 1</span></h1>
        <p class="mt-1 text-sm text-zinc-600 dark:text-zinc-400 max-w-prose">将心语在 <em>诗性</em> / <em>日常</em> / <em>学术</em> 语域之间温柔转译；把难以言说的体验，折叠为可传递的文本与诗。</p>
      </div>
    </div>
  </section>

  <!-- 内容区 -->
  <main class="mx-auto max-w-6xl px-4 pb-16">
    <div class="grid md:grid-cols-3 gap-6">
      <!-- 左侧：正文 -->
      <article class="md:col-span-2 space-y-6">
        <!-- 用法 -->
        <section id="usage" class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass">
          <h2 class="font-medium">用法 · Usage</h2>
          <ol class="list-decimal ml-5 mt-3 space-y-2 text-sm text-zinc-600 dark:text-zinc-300">
            <li>在输入框写下你的心语/段落（可是一句话、一段日记、或一段研究笔记）。</li>
            <li>选择目标语域（<span class="kbd">诗性</span> / <span class="kbd">日常</span> / <span class="kbd">学术</span>）。</li>
            <li>点击<strong>施法</strong>，生成对应语域的文本，并可一键复制。</li>
          </ol>
          <div class="mt-4 grid sm:grid-cols-2 gap-3">
            <div>
              <label for="source" class="text-xs text-zinc-500">心语 / 原文</label>
              <textarea id="source" rows="6" class="w-full mt-1 rounded-xl px-3 py-2 text-sm border border-zinc-300/70 dark:border-zinc-700/70 bg-transparent outline-none" placeholder="写下你想转译的心语…"></textarea>
            </div>
            <div>
              <label class="text-xs text-zinc-500">目标语域</label>
              <div class="mt-1 flex flex-wrap gap-2 text-sm">
                <button class="tone-btn rounded-xl px-3 py-1.5 border border-zinc-300/70 dark:border-zinc-700/70" data-tone="poetic">诗性</button>
                <button class="tone-btn rounded-xl px-3 py-1.5 border border-zinc-300/70 dark:border-zinc-700/70" data-tone="daily">日常</button>
                <button class="tone-btn rounded-xl px-3 py-1.5 border border-zinc-300/70 dark:border-zinc-700/70" data-tone="academic">学术</button>
              </div>
              <div class="mt-3">
                <button id="cast" class="rounded-xl px-3 py-1.5 text-sm bg-zinc-900 text-white dark:bg-white dark:text-zinc-900">施法（本地占位）</button>
                <button id="clear" class="rounded-xl px-3 py-1.5 text-sm border border-zinc-300/70 dark:border-zinc-700/70 ml-2">清空</button>
              </div>
            </div>
          </div>
          <div class="mt-4">
            <label class="text-xs text-zinc-500">输出</label>
            <div class="mt-1 rounded-2xl border border-zinc-200/60 dark:border-zinc-800/60 p-4 bg-white/70 dark:bg-zinc-950/60 glass">
              <pre id="output" class="whitespace-pre-wrap text-sm"></pre>
              <div class="mt-3 flex gap-2">
                <button id="copyOut" class="rounded-xl px-3 py-1.5 text-sm border border-zinc-300/70 dark:border-zinc-700/70">复制</button>
                <button id="swap" class="rounded-xl px-3 py-1.5 text-sm border border-zinc-300/70 dark:border-zinc-700/70">将输出设为原文</button>
              </div>
            </div>
          </div>
        </section>

        <!-- 示例 -->
        <section id="examples" class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass">
          <h2 class="font-medium">示例 · Examples</h2>
          <div class="mt-3 grid md:grid-cols-2 gap-3 text-sm text-zinc-600 dark:text-zinc-300">
            <div>
              <p class="text-[13px] text-zinc-500">原文</p>
              <p>“我在夜里看见雨滴像是在学习落下。”</p>
              <p class="mt-2 text-[13px] text-zinc-500">诗性</p>
              <p>“夜把水语教给屋檐，我听见它一遍遍复习。”</p>
            </div>
            <div>
              <p class="text-[13px] text-zinc-500">原文</p>
              <p>“这个实验的噪声其实来自一个被忽略的接地回路。”</p>
              <p class="mt-2 text-[13px] text-zinc-500">学术</p>
              <p>“主噪声源为未纳入模型的接地回路，需在电路等效图中单独标注并对比抑噪前后 PSD。”</p>
            </div>
          </div>
        </section>

        <!-- 注意事项 -->
        <section id="notes" class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass">
          <h2 class="font-medium">注意 · Notes</h2>
          <ul class="mt-3 list-disc ml-5 space-y-1 text-sm text-zinc-600 dark:text-zinc-300">
            <li>咒语尊重原文情感，不做无端夸饰。</li>
            <li>学术语域保留精确名词与因果链条；诗性语域允许留白与转喻。</li>
            <li>敏感内容（隐私、身份）默认做匿名化或模糊化处理。</li>
          </ul>
        </section>
      </article>

      <!-- 右侧：目录与元信息 -->
      <aside class="space-y-4">
        <div class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass">
          <h2 class="font-medium">目录</h2>
          <ol class="mt-3 text-sm text-zinc-600 dark:text-zinc-300 space-y-1">
            <li><a class="hover:opacity-80" href="#usage">用法</a></li>
            <li><a class="hover:opacity-80" href="#examples">示例</a></li>
            <li><a class="hover:opacity-80" href="#notes">注意</a></li>
          </ol>
        </div>
        <div class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass text-sm text-zinc-600 dark:text-zinc-300">
          <div class="flex items-center justify-between"><span>版本</span><span>v1.0</span></div>
          <div class="flex items-center justify-between mt-1"><span>更新时间</span><span>2025-08-21</span></div>
        </div>
        <div class="rounded-3xl border border-zinc-200/60 dark:border-zinc-800/60 p-5 bg-white/70 dark:bg-zinc-950/60 glass">
          <h2 class="font-medium">相关</h2>
          <ul class="mt-3 text-sm text-zinc-600 dark:text-zinc-300 space-y-1">
            <li><a class="hover:opacity-80" href="./kitten.html">← 返回魔法金库</a></li>
            <li><a class="hover:opacity-80" href="#">→ 术语折叠（即将）</a></li>
          </ul>
        </div>
      </aside>
    </div>
  </main>

  <footer class="py-10">
    <div class="mx-auto max-w-6xl px-4 text-xs text-zinc-500 dark:text-zinc-400 flex items-center justify-between">
      <p>© <span id="year"></span> Lingua Magica · LittleSummer</p>
      <a class="hover:opacity-80" href="#top">返回顶部</a>
    </div>
  </footer>

  <script>
    // 年份
    document.getElementById('year').textContent = new Date().getFullYear();

    // 主题切换
    const themeBtn = document.getElementById('themeToggle');
    const root = document.documentElement;
    const saved = localStorage.getItem('theme');
    if (saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      root.classList.add('dark');
    }
    themeBtn?.addEventListener('click', () => {
      root.classList.toggle('dark');
      localStorage.setItem('theme', root.classList.contains('dark') ? 'dark' : 'light');
    });

    // 星空
    const starWrap = document.getElementById('stars');
    for (let i = 0; i < 48; i++){
      const s = document.createElement('span');
      s.className = 'twinkle';
      s.style.left = Math.random()*100 + '%';
      s.style.top = Math.random()*100 + '%';
      s.style.animationDelay = (Math.random()*4).toFixed(2) + 's';
      starWrap.appendChild(s);
    }

    // 目标语域选择
    let tone = 'poetic';
    document.querySelectorAll('.tone-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        document.querySelectorAll('.tone-btn').forEach(b=>b.classList.remove('bg-zinc-900','text-white','dark:bg-white','dark:text-zinc-900'));
        btn.classList.add('bg-zinc-900','text-white','dark:bg-white','dark:text-zinc-900');
        tone = btn.dataset.tone;
      })
    });

    // 施法（本地占位算法：简单改写示意）
    const cast = document.getElementById('cast');
    const clearBtn = document.getElementById('clear');
    const output = document.getElementById('output');
    const source = document.getElementById('source');
    cast.addEventListener('click', ()=>{
      const text = (source.value||'').trim();
      if(!text){ alert('写点什么吧～'); return; }
      let result = text;
      if(tone==='poetic'){
        result = `【诗性】\n`+ text
          .replace(/。/g,'。\n')
          .replace(/我/g,'我（在风里）')
          .replace(/你/g,'你（在光里）');
      } else if (tone==='daily'){
        result = `【日常】\n`+ text.replace(/\s+/g,' ').trim();
      } else if (tone==='academic'){
        result = `【学术】\n`+ text
          .replace(/觉得|好像|似乎/g,'表明')
          .replace(/可以/g,'可');
      }
      output.textContent = result;
    });
    clearBtn.addEventListener('click', ()=>{ source.value=''; output.textContent=''; });

    // 复制 & 交换
    document.getElementById('copyOut').addEventListener('click', async ()=>{
      const txt = output.textContent||''; if(!txt){return}
      try{ await navigator.clipboard.writeText(txt); alert('已复制到剪贴板'); }catch(e){ alert('复制失败'); }
    });
    document.getElementById('swap').addEventListener('click', ()=>{
      const txt = output.textContent||''; if(!txt){return}
      source.value = txt; output.textContent='';
      window.scrollTo({top:0,behavior:'smooth'});
    });
  </script>
</body>
</html>
